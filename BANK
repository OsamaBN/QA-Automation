package notDefaultPackage;

import java.time.Duration;
import java.util.ArrayList;
import java.util.List;
import java.util.Set;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.annotations.Test;
import io.github.bonigarcia.wdm.WebDriverManager;

public class Testing_01 {

	static WebDriver driver;
	
	@Test
	public void OpenWebsite()
	{
		 
		    WebDriverManager.chromedriver().setup();
			ChromeOptions options = new ChromeOptions();
			options.addArguments("--remote-allow-origins=*");
			driver = new ChromeDriver(options);
			
			driver.get("https://www.globalsqa.com/angularJs-protractor/BankingProject");

	}
    
	@Test(priority = 1)
	public void BankManagerLogin()
	{
		
		WebDriverWait wait =  new WebDriverWait(driver,Duration.ofSeconds(5));
		wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//button[text()='Bank Manager Login']")));
		driver.findElement(By.xpath("//button[text()='Bank Manager Login']")).click();
		
	}
	
	@Test(priority = 2)
	public void EnterCredentials()
	{
		WebDriverWait wait1 =  new WebDriverWait(driver,Duration.ofSeconds(10));
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//button[@ng-class = 'btnClass1']")));
		WebElement AddCust = driver.findElement(By.xpath("//button[@ng-class = 'btnClass1']"));
		AddCust.click();
	
		
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//input[@placeholder = 'First Name']")));
		String Fname = "Osama";
		String Lname = "Bin Nadeem";
		//ENTER FIRST NAME
		driver.findElement(By.xpath("//input[@placeholder = 'First Name']")).sendKeys(Fname);
		//ENTER LAST NAME
		WebElement lname = driver.findElement(By.xpath("//input[@placeholder = 'Last Name']"));
		lname.sendKeys(Lname);
		//ENTER POST CODE
		WebElement post = driver.findElement(By.xpath("//input[@placeholder = 'Post Code']"));
		post.sendKeys("54000");
	//ACCEPT THE ALERT
		WebElement Addcs = driver.findElement(By.xpath("//button[@type = 'submit']"));
		Addcs.click();
		driver.switchTo().alert().accept();
	}
	
	@Test(priority=3)
	public void OpenAccount()
	{
		WebDriverWait wait1 =  new WebDriverWait(driver,Duration.ofSeconds(10));
		//OPEN ACCOUNT
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//button[@ng-class= 'btnClass2']")));
		WebElement openacct = driver.findElement(By.xpath("//button[@ng-class= 'btnClass2']"));
		openacct.click();
		//WAIT 
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//select[@id= 'userSelect']")));
		//SELECT CUSTOMER
		driver.findElement(By.xpath("//select[@id= 'userSelect']")).click();
		Select CustName = new Select (driver.findElement(By.xpath("//select[@id= 'userSelect']")));
		CustName.selectByVisibleText("Osama Bin Nadeem");
		// SELECT CURRENCY 
		driver.findElement(By.xpath("//select[@id= 'currency']")).click();
		Select Curr = new Select (driver.findElement(By.xpath("//select[@id= 'currency']")));
		Curr.selectByVisibleText("Rupee");
		
        //CLICK PROCESS
		driver.findElement(By.xpath("//button[@type= 'submit']")).click();
		
		//ACCEPT THE ALERT
		System.out.println(driver.switchTo().alert().getText());
		driver.switchTo().alert().accept();
		
		
	}
	
	@Test(priority=4)
	public void CustomerLogin()
	{
		//GOTO HOME PAGE
		driver.navigate().back();
		driver.navigate().back();
		driver.navigate().back();
		WebDriverWait wait1 =  new WebDriverWait(driver,Duration.ofSeconds(10));
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//button[@ng-click= 'customer()']")));
		//CLICK CUSTOMER LOGIN 
		driver.findElement(By.xpath("//button[@ng-click= 'customer()']")).click();
		//WAIT
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//select[@id= 'userSelect']")));
		driver.findElement(By.xpath("//select[@id= 'userSelect']")).click();
		Select cust =  new Select(	driver.findElement(By.xpath("//select[@id= 'userSelect']"))); 
		cust.selectByVisibleText("Osama Bin Nadeem");
		
	    // CLICK LOGIN
		driver.findElement(By.xpath("//button[@type= 'submit']")).click();
	}
	
	@Test(priority=5)
	public void Transaction_Deposit ()
	{    
		WebDriverWait wait1 =  new WebDriverWait(driver,Duration.ofSeconds(10));
		
		//CLICK DEPOSIT
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//button[@ng-class= 'btnClass2']")));
		driver.findElement(By.xpath("//button[@ng-class= 'btnClass2']")).click();
		// WAIT
		
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//input[@placeholder='amount']")));
		// ENTER AMOUNT 
		driver.findElement(By.xpath("//input[@placeholder='amount']")).sendKeys("6000");
	// CLICK DEPOSIT
		driver.findElement(By.xpath("	//button[text()='Deposit']")).click();
		
		
	}
	
	
	
	@Test(priority=6)
	public void Transaction_Withdrawal () throws InterruptedException
	{    
		WebDriverWait wait1 =  new WebDriverWait(driver,Duration.ofSeconds(10));
		WebDriverWait wait2 =  new WebDriverWait(driver,Duration.ofSeconds(40));
		
		//CLICK DEPOSIT
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//button[@ng-class='btnClass3']")));
		driver.findElement(By.xpath("//button[@ng-class='btnClass3']")).click();
		// WAIT
		Thread.sleep(2000);
		wait2.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//input[@placeholder='amount']")));
		// ENTER AMOUNT 
		driver.findElement(By.xpath("//input[@placeholder='amount']")).sendKeys("2000");
	// CLICK DEPOSIT
		driver.findElement(By.xpath("//button[text()='Withdraw']")).click();
		
		
	}
	
	@Test(priority = 7)
	public void Transcation_List() throws InterruptedException
	{
		WebDriverWait wait1 =  new WebDriverWait(driver,Duration.ofSeconds(10));
		
		wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//button[@ng-class='btnClass1']")));
		Thread.sleep(3000);
		driver.findElement(By.xpath("//button[@ng-class='btnClass1']")).click();
		
		
	}
	
	@Test(priority=8)
	public void Get_List() throws InterruptedException
	{
		Thread.sleep(3000);
		List <WebElement> listoftable = driver.findElements(By.xpath("//table[@class='table table-bordered table-striped']"));
		
		for (WebElement eachLink : listoftable)
		{
			System.out.println(eachLink.getText());
		}
		
		driver.findElement(By.xpath("//button[text()='Reset']")).click();
		driver.findElement(By.xpath("//button[text()='Logout']")).click();
		
	}
	
	@Test(priority=9)
	public void Home()
	{
		driver.findElement(By.xpath("//button[@class='btn home']")).click();
		WebDriverWait wait =  new WebDriverWait(driver,Duration.ofSeconds(5));
		wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//button[text()='Bank Manager Login']")));
		driver.findElement(By.xpath("//button[text()='Bank Manager Login']")).click();
		
		wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//button[@ng-class='btnClass3']")));
		driver.findElement(By.xpath("//button[@ng-class='btnClass3']")).click();
		
	}
	
	
}
